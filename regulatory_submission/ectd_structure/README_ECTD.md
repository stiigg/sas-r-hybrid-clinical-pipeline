# eCTD Module 5 Structure for Clinical Data

## Overview

This directory demonstrates the **eCTD (electronic Common Technical Document) Module 5** structure for clinical study data submissions. Module 5 contains the Clinical Study Reports and related data that support regulatory applications.

## eCTD Module 5.3.5: Clinical Data

The clinical data section is organized as follows:

### Module 5.3.5.1: Reports of Biopharmaceutic Studies
- Clinical pharmacology study reports
- Not typically relevant for efficacy/safety submissions

### Module 5.3.5.2: Reports of Studies Pertinent to Pharmacokinetics
- PK study reports and data

### Module 5.3.5.3: Reports of Human Pharmacokinetics (PK) Studies
**Key location for ADaM datasets**:
```
m5/datasets/study001/analysis/
├── adam/
│   ├── adsl.xpt              # Subject-Level Analysis Dataset
│   ├── adrs.xpt              # Response Analysis Dataset
│   ├── adtte.xpt             # Time-to-Event Analysis Dataset
│   ├── define.xml            # ADaM define.xml
│   └── adrg.pdf              # Analysis Data Reviewer's Guide
└── legacy/                   # SAS datasets (if applicable)
```

### Module 5.3.5.4: Reports of Human Pharmacodynamics (PD) Studies  
**Key location for SDTM datasets**:
```
m5/datasets/study001/tabulations/
├── sdtm/
│   ├── dm.xpt                # Demographics
│   ├── rs.xpt                # Disease Response
│   ├── tr.xpt                # Tumor Results
│   ├── ds.xpt                # Disposition
│   ├── ex.xpt                # Exposure
│   ├── ae.xpt                # Adverse Events
│   ├── lb.xpt                # Laboratory
│   ├── vs.xpt                # Vital Signs
│   ├── define.xml            # SDTM define.xml
│   └── csdrg.pdf             # Clinical Study Data Reviewer's Guide
└── legacy/                   # SAS datasets (if applicable)
```

## File Organization for This Repository

In this repository, submission-ready files are generated in:

```
regulatory_submission/
├── define_xml/
│   └── outputs/
│       ├── adsl.xpt
│       ├── adrs.xpt
│       ├── adtte.xpt
│       └── define_adam_v2.xml
├── adrg/
│   └── ADRG_STUDY001_template.md  (convert to PDF for submission)
└── ectd_structure/
    └── m5/
        └── datasets/
            └── study001/
                ├── analysis/adam/     # Copy XPT + define.xml + ADRG here
                └── tabulations/sdtm/  # Copy SDTM XPT + define.xml + CSDRG here
```

**For submission**, copy generated files from `define_xml/outputs/` and `adrg/` into the appropriate `m5/` subfolders.

## eCTD Submission Requirements

### File Formats
- **Datasets**: SAS XPT v5 transport format (`.xpt`)
- **Define.xml**: XML format per CDISC Define-XML v2.0 or v2.1
- **ADRG/CSDRG**: PDF format
- **Study Reports**: PDF format

### Naming Conventions
- Dataset names: Lowercase, 8 characters max (e.g., `adsl.xpt`, `dm.xpt`)
- Define.xml: `define.xml` (exact name)
- ADRG: `adrg.pdf` (lowercase recommended)

### File Size Limits
- Individual XPT files: Recommended ≤5GB (split larger files)
- Total submission size: Varies by agency

## Validation Requirements

### Before Submission
1. **Define.xml Validation**:
   ```bash
   # Using Pinnacle 21 Community
   pinnacle21 validate --define define.xml --data .
   ```

2. **Dataset Validation**:
   - All variables have labels ≤40 characters
   - Character variables ≤200 characters
   - No special characters in variable names
   - Consistent CDISC version across all define.xml files

3. **eCTD Structure Validation**:
   - All files in correct Module 5 locations
   - File names follow conventions
   - PDF files are searchable (not scanned images)

## Connection to This Repository

This eCTD structure integrates with the repository as follows:

### Generated Artifacts
1. **ADaM Datasets**: Created by `etl/adam/` and `etl/adam_r_admiral/` programs
2. **SDTM Datasets**: Created by `sas/sdtm/` programs
3. **Define.xml**: Generated by `regulatory_submission/define_xml/generate_define_adam.R`
4. **ADRG**: Created from `regulatory_submission/adrg/ADRG_STUDY001_template.md`

### Submission Preparation Script
```r
# Example script to prepare submission package
source("regulatory_submission/prepare_submission_package.R")

# This would:
# 1. Run all ADaM/SDTM generation programs
# 2. Generate define.xml files
# 3. Convert ADRG markdown to PDF
# 4. Copy all files to eCTD structure
# 5. Run validation checks
# 6. Generate submission checklist
```

## Module 2.7: Clinical Summary Documents

While not part of Module 5, these summary documents reference the Module 5 datasets:

### Module 2.7.3: Summary of Clinical Efficacy (SCE)
- References ADaM datasets from Module 5.3.5.3
- Includes ISE (Integrated Summary of Efficacy) for multi-study submissions

### Module 2.7.4: Summary of Clinical Safety (SCS)
- References ADaM safety datasets from Module 5.3.5.3
- Includes ISS (Integrated Summary of Safety) for multi-study submissions

See `studies/pooled_analyses/` in this repository for ISS/ISE examples.

## Resources

### Regulatory Guidance
- [FDA eCTD Technical Specifications](https://www.fda.gov/drugs/electronic-regulatory-submission-and-review/ectd-technical-specifications)
- [ICH M4 Common Technical Document](https://www.ema.europa.eu/en/ich-m4-common-technical-document-ctd)
- [FDA Study Data Technical Conformance Guide](https://www.fda.gov/media/88173/download)

### Tools
- [FDA ESG (Electronic Submissions Gateway)](https://www.fda.gov/industry/fda-esubmitter/about-esg)
- [eCTD Validator Tools](https://www.fda.gov/drugs/electronic-regulatory-submission-and-review/ectd-technical-specifications)
- [Pinnacle 21 Community](https://www.pinnacle21.com/products/community): Free validation tool

## Submission Checklist

See `submission_checklist.md` in this directory for a complete pre-submission validation checklist.
